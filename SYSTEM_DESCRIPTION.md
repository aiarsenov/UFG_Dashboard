# Описание системы UFG Dashboard для генерального директора

## Общее описание

UFG Dashboard — это веб-приложение для аналитики и управления пользователями компании United Fashion Group. Система развернута на платформе Vercel и использует базу данных Supabase для хранения информации и авторизации пользователей.

---

## Основные возможности системы

### 1. Авторизация и безопасность

**Регистрация новых пользователей:**
- Пользователь заполняет форму регистрации (ФИО, email, пароль)
- После регистрации пользователь **не может войти** в систему
- Система автоматически отправляет **уведомление администратору** на email о новой регистрации
- Пользователь видит сообщение: "Вашу регистрацию должен одобрить администратор"

**Вход в систему:**
- Пользователь вводит email и пароль
- Если пользователь **не одобрен** администратором — вход блокируется
- Если пользователь **одобрен** — вход разрешен

**Восстановление пароля:**
- Пользователь может запросить восстановление пароля
- На email приходит ссылка для сброса пароля
- После сброса можно войти с новым паролем

### 2. Управление пользователями (Админ-панель)

**Доступ:**
- Только администратор (`vasiliy_arsenov@bizan.pro`) имеет доступ к панели управления
- Администратор автоматически одобрен и может входить без ограничений

**Функционал админ-панели (`/dashboard`):**

1. **Просмотр всех пользователей:**
   - Таблица со всеми зарегистрированными пользователями
   - Отображается: Email, ФИО, Дата регистрации, Статус одобрения, Статус блокировки

2. **Одобрение пользователей:**
   - Кнопка **"Approve"** для каждого неодобренного пользователя
   - После нажатия:
     - Пользователь получает **email-уведомление** об одобрении
     - Пользователь может войти в систему
     - Статус меняется на "Одобрен"

3. **Блокировка/разблокировка пользователей:**
   - Кнопка **"Заблокировать"** / **"Разблокировать"**
   - Заблокированные пользователи не могут войти в систему

4. **Создание новых пользователей:**
   - Администратор может создать пользователя вручную
   - Указывается: ФИО, Email, Пароль
   - Пользователь создается сразу одобренным

### 3. Профиль пользователя

**Доступ:** `/profile`

- Просмотр и редактирование ФИО
- Email отображается, но **нельзя изменить**
- Кнопка выхода из системы

### 4. Аналитика

**Доступ:** Раздел "Аналитика" в боковом меню

- Встраивание дашбордов из DataLens
- Подразделы: Рынок и конкуренты, Ключевые метрики, Анализ сценариев и др.
- Каждый раздел имеет вкладки: Динамика, Сравнение, Детализация

---

## Процесс работы системы

### Сценарий 1: Регистрация нового пользователя

1. Пользователь заходит на сайт → нажимает "Зарегистрироваться"
2. Заполняет форму (ФИО, email, пароль)
3. Нажимает "Зарегистрироваться"
4. **Система автоматически:**
   - Создает учетную запись
   - Отправляет **email администратору** с уведомлением о новой регистрации
   - Блокирует вход пользователя до одобрения
5. Пользователь видит сообщение об ожидании одобрения

### Сценарий 2: Одобрение пользователя администратором

1. Администратор заходит в систему под своим email
2. Переходит в раздел **"Дашборд"** (`/dashboard`)
3. Видит список всех пользователей
4. Находит пользователя со статусом **"Одобрен: Нет"**
5. Нажимает кнопку **"Approve"**
6. **Система автоматически:**
   - Меняет статус на "Одобрен"
   - Отправляет **email пользователю** с уведомлением об одобрении
7. Пользователь может войти в систему

### Сценарий 3: Вход пользователя

1. Пользователь заходит на страницу входа
2. Вводит email и пароль
3. **Система проверяет:**
   - Правильность email и пароля
   - Статус одобрения (если не админ)
   - Статус блокировки
4. Если все проверки пройдены — пользователь входит в систему
5. Если пользователь не одобрен — показывается сообщение об ожидании

---

## Безопасность

1. **Доступ к админ-панели:**
   - Только администратор (`vasiliy_arsenov@bizan.pro`) имеет доступ
   - Обычные пользователи не могут видеть список всех пользователей

2. **Одобрение регистраций:**
   - Все новые пользователи требуют одобрения администратора
   - Администратор автоматически одобрен

3. **Блокировка пользователей:**
   - Администратор может заблокировать любого пользователя
   - Заблокированные пользователи не могут войти

4. **Защита маршрутов:**
   - Все страницы аналитики требуют авторизации
   - Неавторизованные пользователи перенаправляются на страницу входа

---

## Технические детали (для IT-отдела)

- **Платформа:** Next.js 16 (App Router)
- **Хостинг:** Vercel (автоматический деплой из GitHub)
- **База данных:** Supabase (PostgreSQL)
- **Авторизация:** Supabase Auth (Email + Password)
- **Аналитика:** DataLens (встраивание через iframe)

---

## Контакты и доступ

- **URL системы:** https://ufg-dashboard.vercel.app
- **Администратор:** `vasiliy_arsenov@bizan.pro`
- **Репозиторий:** https://github.com/aiarsenov/UFG_Dashboard

---

## Резюме

Система обеспечивает:
- ✅ Контролируемую регистрацию пользователей (требуется одобрение)
- ✅ Автоматические email-уведомления администратору и пользователям
- ✅ Управление пользователями (одобрение, блокировка)
- ✅ Безопасный доступ к аналитическим дашбордам
- ✅ Профили пользователей с возможностью редактирования

Все процессы автоматизированы и не требуют ручного вмешательства, кроме одобрения новых пользователей администратором.


